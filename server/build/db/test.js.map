{"version":3,"sources":["../../src/db/test.js"],"names":["truncateCollections","DB","truncateCollection","truncateEdgeCollection","createMessagesToChannelMain","insertIntoCollection","name","channel","userName","text","msg1","msg2","msg3","insertIntoEdges","_from","_id","_to","createMessagesToChannelMyChannel"],"mappings":"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","sourcesContent":["import 'dotenv/config';\nimport { Database, aql } from 'arangojs';\nimport DB from './index';\nimport { getNodesByChannel, getMessagesByUsername, getEdgesByChannel, getChannelsByName } from './queries';\nimport { log, warning, success } from '../utils/logger';\nimport { addUser } from './manipulation';\n\n(async function () {\n  // await DB.createCollection(\"messages\");\n  // await DB.createCollection(\"channels\");\n  // await DB.createEdgeCollection(\"belongsToChannel\");\n\n  await addUser('Antti');\n  await addUser('Matan');\n  // await truncateCollections();\n  // await createMessagesToChannelMain();\n  // await createMessagesToChannelMyChannel();\n\n  //   const messages = await getMessagesByUsername(\"antti\");\n  //   log(success(\"messages :\"), messages);\n\n  //   const channel = await getChannelsByName(\"main\");\n  //   log(warning(\"main channel :\"), channel);\n\n  //   const theChannel = await getChannelsByName(\"theChannel\");\n  //   log(warning(\"theChannel :\"), theChannel);\n  // } catch (err) {\n  //   console.error(\"error\", err.response ? err.response.body : err);\n  // }\n  // await addUser('anon');\n}());\n\nasync function truncateCollections() {\n  await DB.truncateCollection('messages');\n  await DB.truncateCollection('channels');\n  await DB.truncateEdgeCollection('belongsToChannel');\n}\n\nasync function createMessagesToChannelMain() {\n  const channel = await DB.insertIntoCollection('channels', { name: 'main' });\n  const msg1 = await DB.insertIntoCollection('messages', { userName: 'antti', text: 'hello' });\n  const msg2 = await DB.insertIntoCollection('messages', { userName: 'antti', text: 'hello!' });\n  const msg3 = await DB.insertIntoCollection('messages', { userName: 'antti', text: 'hello!1111!' });\n  await DB.insertIntoEdges('belongsToChannel', { _from: msg1._id, _to: channel._id });\n  await DB.insertIntoEdges('belongsToChannel', { _from: msg2._id, _to: channel._id });\n  await DB.insertIntoEdges('belongsToChannel', { _from: msg3._id, _to: channel._id });\n}\nasync function createMessagesToChannelMyChannel() {\n  const channel = await DB.insertIntoCollection('channels', { name: 'theChannel' });\n  const msg1 = await DB.insertIntoCollection('messages', { userName: 'matan', text: 'foobar' });\n  const msg2 = await DB.insertIntoCollection('messages', { userName: 'matan', text: 'yeahyeah' });\n  const msg3 = await DB.insertIntoCollection('messages', { userName: 'matan', text: 'ok' });\n  await DB.insertIntoEdges('belongsToChannel', { _from: msg1._id, _to: channel._id });\n  await DB.insertIntoEdges('belongsToChannel', { _from: msg2._id, _to: channel._id });\n  await DB.insertIntoEdges('belongsToChannel', { _from: msg3._id, _to: channel._id });\n}\n"],"file":"test.js"}